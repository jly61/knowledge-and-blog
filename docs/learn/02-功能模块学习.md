# é˜¶æ®µ 3ï¼šåŠŸèƒ½æ¨¡å—å­¦ä¹ 

## ğŸ“š å­¦ä¹ ç›®æ ‡

æ·±å…¥ç†è§£é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ŒæŒæ¡æ¯ä¸ªåŠŸèƒ½çš„å®ç°åŸç†ã€‚

## ğŸ¯ å­¦ä¹ æ¸…å•

- [ ] ç¬”è®°ç³»ç»Ÿ
- [ ] åšå®¢ç³»ç»Ÿ
- [ ] çŸ¥è¯†å›¾è°±
- [ ] é¢è¯•é¢˜åº“
- [ ] æœç´¢åŠŸèƒ½
- [ ] åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†

---

## 1. ç¬”è®°ç³»ç»Ÿ

### ğŸ“ æ ¸å¿ƒåŠŸèƒ½

- ç¬”è®° CRUDï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰
- Markdown ç¼–è¾‘å™¨ï¼ˆåˆ†å±ç¼–è¾‘ã€å®æ—¶é¢„è§ˆï¼‰
- åŒå‘é“¾æ¥ç³»ç»Ÿ
- åˆ†ç±»å’Œæ ‡ç­¾
- ç½®é¡¶å’Œæ”¶è—

### ğŸ” å…³é”®æ–‡ä»¶

```
app/(dashboard)/notes/
â”œâ”€â”€ page.tsx              # ç¬”è®°åˆ—è¡¨
â”œâ”€â”€ [id]/
â”‚   â”œâ”€â”€ page.tsx         # ç¬”è®°è¯¦æƒ…
â”‚   â””â”€â”€ edit/
â”‚       â””â”€â”€ page.tsx     # ç¼–è¾‘ç¬”è®°
â””â”€â”€ new/
    â””â”€â”€ page.tsx         # æ–°å»ºç¬”è®°

app/actions/notes.ts     # Server Actions
components/notes/        # ç¬”è®°ç›¸å…³ç»„ä»¶
```

### ğŸ¯ å­¦ä¹ é‡ç‚¹

#### 1.1 ç¬”è®°åˆ›å»ºæµç¨‹

**æ•°æ®æµ**ï¼š
```
ç”¨æˆ·è¾“å…¥ â†’ NoteEditor (Client) 
    â†’ createNote (Server Action)
    â†’ Prisma (æ•°æ®åº“)
    â†’ é‡å®šå‘åˆ°ç¬”è®°åˆ—è¡¨
```

**å®è·µ**ï¼šè¿½è¸ªåˆ›å»ºç¬”è®°çš„å®Œæ•´æµç¨‹
1. æŸ¥çœ‹ `components/notes/note-editor.tsx`
2. æŸ¥çœ‹ `app/actions/notes.ts` çš„ `createNote`
3. ç†è§£æ•°æ®å¦‚ä½•ä¿å­˜åˆ°æ•°æ®åº“

#### 1.2 åŒå‘é“¾æ¥ç³»ç»Ÿ

**æ ¸å¿ƒé€»è¾‘**ï¼š
- è§£æ `[[ç¬”è®°æ ‡é¢˜]]` è¯­æ³•
- åˆ›å»ºé“¾æ¥å…³ç³»ï¼ˆLink è¡¨ï¼‰
- è‡ªåŠ¨ç”Ÿæˆåå‘é“¾æ¥ï¼ˆbacklinksï¼‰

**å…³é”®æ–‡ä»¶**ï¼š
- `lib/markdown/parseLinks.ts` - é“¾æ¥è§£æ
- `app/actions/notes.ts` - é“¾æ¥åˆ›å»ºé€»è¾‘

**å®è·µ**ï¼šç†è§£åŒå‘é“¾æ¥çš„å®ç°
```typescript
// 1. è§£æé“¾æ¥
// lib/markdown/parseLinks.ts
export function parseLinks(content: string): string[]

// 2. åˆ›å»ºé“¾æ¥å…³ç³»
// app/actions/notes.ts
async function createLinks(noteId: string, links: string[])
```

#### 1.3 Markdown ç¼–è¾‘å™¨

**åŠŸèƒ½**ï¼š
- åˆ†å±ç¼–è¾‘ï¼ˆå·¦ä¾§ç¼–è¾‘ï¼Œå³ä¾§é¢„è§ˆï¼‰
- åŒæ­¥æ»šåŠ¨
- è¯­æ³•é«˜äº®
- å›¾ç‰‡ä¸Šä¼ 

**å…³é”®ç»„ä»¶**ï¼š
- `components/editor/markdown-split-editor.tsx`

**å®è·µ**ï¼šæŸ¥çœ‹ç¼–è¾‘å™¨å®ç°
```bash
cat components/editor/markdown-split-editor.tsx
```

---

## 2. åšå®¢ç³»ç»Ÿ

### ğŸ“° æ ¸å¿ƒåŠŸèƒ½

- ä»ç¬”è®°å‘å¸ƒä¸ºæ–‡ç« 
- æ–‡ç« ç¼–è¾‘å’Œç®¡ç†
- SEO ä¼˜åŒ–
- è¯„è®ºç³»ç»Ÿ
- åˆ†ç±»å’Œæ ‡ç­¾é¡µé¢

### ğŸ” å…³é”®æ–‡ä»¶

```
app/(blog)/
â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ page.tsx         # åšå®¢é¦–é¡µ
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx     # æ–‡ç« è¯¦æƒ…
â””â”€â”€ category/
    â””â”€â”€ [slug]/
        â””â”€â”€ page.tsx     # åˆ†ç±»é¡µé¢

app/actions/posts.ts     # Server Actions
components/posts/        # æ–‡ç« ç›¸å…³ç»„ä»¶
```

### ğŸ¯ å­¦ä¹ é‡ç‚¹

#### 2.1 å‘å¸ƒæµç¨‹

**æ•°æ®æµ**ï¼š
```
ç¬”è®° â†’ å‘å¸ƒè¡¨å• â†’ publishNote (Server Action)
    â†’ åˆ›å»º Post è®°å½•
    â†’ å…³è” Note å’Œ Post
    â†’ ç”Ÿæˆ SEO slug
```

**å®è·µ**ï¼šæŸ¥çœ‹å‘å¸ƒåŠŸèƒ½
```typescript
// app/actions/posts.ts
export async function publishNote(noteId: string, data: PublishInput)
```

#### 2.2 SEO ä¼˜åŒ–

**å®ç°**ï¼š
- åŠ¨æ€å…ƒæ•°æ®ï¼ˆmetadataï¼‰
- sitemap.xml
- robots.txt
- JSON-LD ç»“æ„åŒ–æ•°æ®

**å…³é”®æ–‡ä»¶**ï¼š
- `app/(blog)/blog/[slug]/page.tsx` - åŠ¨æ€ metadata
- `app/sitemap.ts` - ç«™ç‚¹åœ°å›¾
- `app/robots.ts` - çˆ¬è™«è§„åˆ™

**å®è·µ**ï¼šæŸ¥çœ‹ SEO å®ç°
```typescript
// åŠ¨æ€å…ƒæ•°æ®
export async function generateMetadata({ params }) {
  const post = await getPostBySlug(params.slug)
  return {
    title: post.title,
    description: post.excerpt,
    // ...
  }
}
```

#### 2.3 è¯„è®ºç³»ç»Ÿ

**åŠŸèƒ½**ï¼š
- å‘è¡¨è¯„è®ºï¼ˆç™»å½•/åŒ¿åï¼‰
- å›å¤è¯„è®ºï¼ˆåµŒå¥—å›å¤ï¼‰
- åˆ é™¤è¯„è®ºï¼ˆæƒé™æ§åˆ¶ï¼‰

**å…³é”®æ–‡ä»¶**ï¼š
- `app/actions/comments.ts` - è¯„è®º Server Actions
- `components/comments/` - è¯„è®ºç»„ä»¶

---

## 3. çŸ¥è¯†å›¾è°±

### ğŸ•¸ï¸ æ ¸å¿ƒåŠŸèƒ½

- ç¬”è®°å…³ç³»å¯è§†åŒ–
- èŠ‚ç‚¹äº¤äº’ï¼ˆç‚¹å‡»è·³è½¬ï¼‰
- ç­›é€‰ï¼ˆæŒ‰åˆ†ç±»ã€æ ‡ç­¾ï¼‰
- å›¾è°±æ§åˆ¶ï¼ˆç¼©æ”¾ã€è‡ªé€‚åº”ï¼‰

### ğŸ” å…³é”®æ–‡ä»¶

```
app/(dashboard)/graph/
â””â”€â”€ page.tsx             # å›¾è°±é¡µé¢

app/actions/graph.ts     # å›¾è°±æ•°æ®ç”Ÿæˆ
components/graph/        # å›¾è°±ç»„ä»¶
```

### ğŸ¯ å­¦ä¹ é‡ç‚¹

#### 3.1 æ•°æ®ç”Ÿæˆ

**é€»è¾‘**ï¼š
- ä» Link è¡¨è·å–æ‰€æœ‰é“¾æ¥å…³ç³»
- æ„å»ºèŠ‚ç‚¹ï¼ˆnotesï¼‰å’Œè¾¹ï¼ˆlinksï¼‰
- è®¡ç®—èŠ‚ç‚¹ä½ç½®ï¼ˆvis-network ç‰©ç†å¼•æ“ï¼‰

**å®è·µ**ï¼šæŸ¥çœ‹å›¾è°±æ•°æ®ç”Ÿæˆ
```typescript
// app/actions/graph.ts
export async function getGraphData(filters?: GraphFilters)
```

#### 3.2 å¯è§†åŒ–å®ç°

**æŠ€æœ¯æ ˆ**ï¼š
- vis-network - å›¾è°±å¯è§†åŒ–åº“

**å…³é”®ç»„ä»¶**ï¼š
- `components/graph/graph-client.tsx`

**å®è·µ**ï¼šç†è§£å›¾è°±æ¸²æŸ“
```typescript
// ä½¿ç”¨ vis-network
import { Network } from "vis-network"
const network = new Network(container, data, options)
```

---

## 4. é¢è¯•é¢˜åº“

### ğŸ“š æ ¸å¿ƒåŠŸèƒ½

- æ–‡ä»¶ç³»ç»Ÿè¯»å–ï¼ˆinterview/ æ–‡ä»¶å¤¹ï¼‰
- æ ‘å½¢å¯¼èˆªï¼ˆå¤šçº§ç›®å½•ï¼‰
- æ–‡ç« ç›®å½•ï¼ˆè‡ªåŠ¨æå–æ ‡é¢˜ï¼‰
- æ’åºåŠŸèƒ½ï¼ˆæ–‡ä»¶åå‰ç¼€ï¼‰

### ğŸ” å…³é”®æ–‡ä»¶

```
app/interview/
â”œâ”€â”€ page.tsx             # é¢è¯•é¢˜åº“é¦–é¡µ
â”œâ”€â”€ [...path]/
â”‚   â””â”€â”€ page.tsx        # é¢è¯•é¢˜è¯¦æƒ…
â””â”€â”€ layout.tsx          # é¢è¯•é¢˜åº“å¸ƒå±€

app/actions/interview.ts # æ–‡ä»¶ç³»ç»Ÿè¯»å–
components/interview/   # é¢è¯•é¢˜åº“ç»„ä»¶
```

### ğŸ¯ å­¦ä¹ é‡ç‚¹

#### 4.1 æ–‡ä»¶ç³»ç»Ÿè¯»å–

**å®ç°**ï¼š
- ä½¿ç”¨ Node.js `fs/promises` è¯»å–æ–‡ä»¶
- é€’å½’è¯»å–ç›®å½•ç»“æ„
- æ„å»ºæ ‘å½¢æ•°æ®ç»“æ„

**å®è·µ**ï¼šæŸ¥çœ‹æ–‡ä»¶è¯»å–é€»è¾‘
```typescript
// app/actions/interview.ts
export async function readDirectory(path: string): Promise<InterviewNode[]>
```

#### 4.2 æ ‘å½¢å¯¼èˆª

**åŠŸèƒ½**ï¼š
- å¤šçº§ç›®å½•å±•å¼€/æ”¶èµ·
- çŠ¶æ€æŒä¹…åŒ–ï¼ˆæ¨¡å—çº§å˜é‡ï¼‰
- å½“å‰è·¯å¾„é«˜äº®

**å…³é”®ç»„ä»¶**ï¼š
- `components/interview/interview-tree.tsx`

---

## 5. æœç´¢åŠŸèƒ½

### ğŸ” æ ¸å¿ƒåŠŸèƒ½

- å…¨æ–‡æœç´¢ï¼ˆæ ‡é¢˜ã€å†…å®¹ï¼‰
- é«˜çº§ç­›é€‰ï¼ˆåˆ†ç±»ã€æ ‡ç­¾ï¼‰
- æœç´¢ç»“æœé«˜äº®

### ğŸ” å…³é”®æ–‡ä»¶

```
app/(dashboard)/search/
â””â”€â”€ page.tsx             # æœç´¢é¡µé¢

app/actions/search.ts    # æœç´¢é€»è¾‘
components/search/       # æœç´¢ç»„ä»¶
```

### ğŸ¯ å­¦ä¹ é‡ç‚¹

**æœç´¢å®ç°**ï¼š
- Prisma å…¨æ–‡æœç´¢
- å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢
- ç»“æœæ’åºå’Œåˆ†é¡µ

**å®è·µ**ï¼šæŸ¥çœ‹æœç´¢é€»è¾‘
```typescript
// app/actions/search.ts
export async function searchNotes(query: string, filters?: SearchFilters)
```

---

## 6. åˆ†ç±»å’Œæ ‡ç­¾ç®¡ç†

### ğŸ·ï¸ æ ¸å¿ƒåŠŸèƒ½

- CRUD æ“ä½œ
- ä½¿ç”¨ç»Ÿè®¡
- é¢œè‰²æ ‡è¯†

### ğŸ” å…³é”®æ–‡ä»¶

```
app/(dashboard)/
â”œâ”€â”€ categories/
â”‚   â””â”€â”€ page.tsx         # åˆ†ç±»ç®¡ç†
â””â”€â”€ tags/
    â””â”€â”€ page.tsx         # æ ‡ç­¾ç®¡ç†

app/actions/
â”œâ”€â”€ categories.ts        # åˆ†ç±» Server Actions
â””â”€â”€ tags.ts             # æ ‡ç­¾ Server Actions
```

---

## âœ… é˜¶æ®µ 3 å®Œæˆæ£€æŸ¥

- [ ] èƒ½è§£é‡Šç¬”è®°ç³»ç»Ÿçš„å®Œæ•´æµç¨‹
- [ ] ç†è§£åŒå‘é“¾æ¥çš„å®ç°åŸç†
- [ ] èƒ½è§£é‡Šåšå®¢å‘å¸ƒæµç¨‹
- [ ] ç†è§£çŸ¥è¯†å›¾è°±çš„æ•°æ®ç”Ÿæˆ
- [ ] çŸ¥é“é¢è¯•é¢˜åº“çš„æ–‡ä»¶è¯»å–æœºåˆ¶

## ğŸ“ å®è·µä»»åŠ¡

1. **åŠŸèƒ½è¿½è¸ª**ï¼šé€‰æ‹©ä¸€ä¸ªåŠŸèƒ½ï¼Œä» UI åˆ°æ•°æ®åº“å®Œæ•´è¿½è¸ª
2. **ä»£ç é˜…è¯»**ï¼šé˜…è¯»å…³é”®ç»„ä»¶çš„å®ç°ä»£ç 
3. **åŠŸèƒ½æ‰©å±•**ï¼šå°è¯•æ·»åŠ ä¸€ä¸ªå°åŠŸèƒ½ï¼ˆå¦‚ç¬”è®°æ”¶è—ï¼‰

## â¡ï¸ ä¸‹ä¸€æ­¥

å®Œæˆé˜¶æ®µ 3 åï¼Œç»§ç»­å­¦ä¹ ï¼š
ğŸ‘‰ [03-ä»£ç æ·±åº¦é˜…è¯».md](./03-ä»£ç æ·±åº¦é˜…è¯».md)

