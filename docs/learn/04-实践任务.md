# 阶段 5：实践任务

## 📚 学习目标

通过实践任务巩固所学知识，提升实际开发能力。

## 🎯 任务分类

- [ ] 基础任务（理解项目）
- [ ] 进阶任务（功能扩展）
- [ ] 高级任务（架构优化）

---

## 基础任务

### 任务 1：项目环境搭建

**目标**：从零搭建项目运行环境

**步骤**：
1. 克隆项目
2. 安装依赖（pnpm install）
3. 配置环境变量
4. 初始化数据库（pnpm db:push）
5. 启动开发服务器（pnpm dev）

**检查点**：
- [ ] 项目能正常启动
- [ ] 能访问首页
- [ ] 能登录（GitHub/Google）

**参考文档**：
- [快速开始](../../QUICK_START.md)
- [数据库设置](../SETUP_DATABASE.md)

---

### 任务 2：代码追踪

**目标**：理解数据从 UI 到数据库的完整流程

**任务**：追踪"创建笔记"的完整流程

**步骤**：
1. 找到创建笔记的 UI 组件
2. 找到调用的 Server Action
3. 找到 Prisma 查询
4. 查看数据库 Schema
5. 绘制数据流图

**检查点**：
- [ ] 能说出每个步骤的作用
- [ ] 能画出数据流图
- [ ] 理解数据如何传递

---

### 任务 3：路由分析

**目标**：理解项目的路由结构

**任务**：分析所有路由及其布局嵌套

**步骤**：
1. 列出所有路由
2. 识别路由组
3. 理解布局嵌套关系
4. 绘制路由树

**检查点**：
- [ ] 能列出所有路由
- [ ] 理解路由组的作用
- [ ] 知道布局如何嵌套

---

## 进阶任务

### 任务 4：添加新功能

**目标**：基于现有代码添加新功能

#### 4.1 笔记收藏功能

**需求**：
- 在笔记列表显示收藏状态
- 点击切换收藏状态
- 添加收藏筛选

**步骤**：
1. 检查数据库 Schema（isFavorite 字段已存在）
2. 修改 Server Action（添加收藏/取消收藏）
3. 修改 UI 组件（添加收藏按钮）
4. 添加筛选功能

**参考代码**：
```typescript
// app/actions/notes.ts
export async function toggleFavorite(noteId: string) {
  const note = await db.note.findUnique({ where: { id: noteId } })
  return await db.note.update({
    where: { id: noteId },
    data: { isFavorite: !note.isFavorite },
  })
}
```

#### 4.2 笔记导出功能

**需求**：
- 导出笔记为 Markdown 文件
- 支持批量导出

**步骤**：
1. 创建导出 Server Action
2. 添加导出按钮
3. 实现文件下载

**参考代码**：
```typescript
// app/actions/notes.ts
export async function exportNote(noteId: string) {
  const note = await db.note.findUnique({ where: { id: noteId } })
  return `# ${note.title}\n\n${note.content}`
}
```

---

### 任务 5：优化现有功能

**目标**：优化现有功能的性能和体验

#### 5.1 搜索功能优化

**需求**：
- 添加搜索历史
- 实现搜索建议
- 优化搜索性能

**步骤**：
1. 添加搜索历史存储（localStorage）
2. 实现搜索建议（模糊匹配）
3. 添加防抖（debounce）

#### 5.2 加载状态优化

**需求**：
- 优化骨架屏样式
- 添加页面切换动画
- 实现渐进式加载

---

### 任务 6：Bug 修复

**目标**：修复项目中的已知问题

**已知问题**（参考 DEVELOPMENT_STATUS.md）：
1. 知识图谱每次切换页面会重新计算布局
2. 搜索功能日期范围筛选待完善

**步骤**：
1. 复现问题
2. 分析原因
3. 实现修复
4. 测试验证

---

## 高级任务

### 任务 7：架构优化

**目标**：优化项目架构，提升可维护性

#### 7.1 代码重构

**需求**：
- 提取公共逻辑
- 优化组件结构
- 统一错误处理

**步骤**：
1. 识别重复代码
2. 提取公共函数/组件
3. 统一错误处理机制

#### 7.2 性能优化

**需求**：
- 优化数据库查询
- 实现缓存策略
- 代码分割优化

**步骤**：
1. 分析性能瓶颈
2. 优化数据库查询（减少 N+1 查询）
3. 实现适当的缓存策略

---

### 任务 8：新功能开发

**目标**：实现开发文档中的待办功能

**可选功能**（参考 DEVELOPMENT_STATUS.md）：
- RSS 订阅
- 笔记版本历史
- 数据导入/导出
- 笔记模板

**步骤**：
1. 选择要开发的功能
2. 设计实现方案
3. 实现功能
4. 编写测试
5. 更新文档

---

## 🎯 任务完成标准

### 基础任务
- [ ] 能独立搭建项目环境
- [ ] 能追踪数据流
- [ ] 理解路由结构

### 进阶任务
- [ ] 能添加新功能
- [ ] 能优化现有功能
- [ ] 能修复 Bug

### 高级任务
- [ ] 能进行架构优化
- [ ] 能开发完整功能
- [ ] 能编写技术文档

## 📝 任务记录

建议为每个任务创建分支和 PR：
```bash
# 创建功能分支
git checkout -b feature/note-favorite

# 完成任务后
git add .
git commit -m "feat: 添加笔记收藏功能"
git push origin feature/note-favorite
```

## ➡️ 下一步

完成实践任务后，检查学习进度：
👉 [05-检查清单.md](./05-检查清单.md)

